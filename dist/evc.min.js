!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.EVC=e():t.EVC=e()}(self,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}t.r(e),t.d(e,{CalendarEvent:()=>a,EventCalendar:()=>w});var a=function(){function t(e){var n=e.title,a=e.start,i=e.end,r=void 0===i?null:i,s=e.themeColor,o=void 0===s?"#03a9f4":s;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=n,r&&void 0!==r.weekDay&&Number.isInteger(r.weekDay)&&(void 0===a.weekDay||!Number.isInteger(a.weekDay)))throw"End day of weekly event is given but no start day is given";this.start=a,this.end=null!=r?r:{},Object.assign(this.end,null!=r?r:this.start),this.validateHexColor(o)&&(this.themeColor=o)}var e,a;return e=t,(a=[{key:"validateHexColor",value:function(t){if(null!==t.match(/^#([0-9a-f]{3}){1,2}$/i))return!0;throw"Invalid hex color "+t}}])&&n(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function o(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,h(t,e,"set"),n),n}function u(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,h(t,e,"get"))}function h(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var l=new WeakMap,c=new WeakMap,v=new WeakMap,f=new WeakMap,y=new WeakMap,d=new WeakMap,m=new WeakMap,g=new WeakMap,p=new WeakMap,w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.events,r=void 0===n?[]:n;if(i(this,t),s(this,l,{writable:!0,value:new Date}),s(this,c,{writable:!0,value:void 0}),s(this,v,{writable:!0,value:void 0}),s(this,f,{writable:!0,value:void 0}),s(this,y,{writable:!0,value:[]}),s(this,d,{writable:!0,value:[new a({title:"Today",start:{day:u(this,l).getDate(),month:u(this,l).getMonth()+1,year:u(this,l).getFullYear()},themeColor:"#8a4af3"})]}),s(this,m,{writable:!0,value:null}),s(this,g,{writable:!0,value:[]}),s(this,p,{writable:!0,value:[]}),!this.validateNoDuplicateEvents(r))throw"Duplicate Events Not Allowed";this.events=r,this.setup()}var e,n;return e=t,n=[{key:"month",get:function(){return u(this,v)},set:function(t){o(this,v,t),this.month>11?(o(this,v,0),this.year++):this.month<0&&(o(this,v,11),this.year--),this.dispatchCustomEvent("monthChanged",this.month),this.updateDays()}},{key:"year",get:function(){return u(this,f)},set:function(t){o(this,f,t),this.dispatchCustomEvent("yearChanged",this.year),this.updateDays()}},{key:"events",get:function(){return u(this,y)},set:function(t){t.map((function(t){return new a(t)})),o(this,y,t.map((function(t){return t instanceof a?t:new a(t)}))),this.updateDays(),this.dispatchCustomEvent("eventsChanged",this.events)}},{key:"selectedDay",get:function(){return u(this,m)},set:function(t){o(this,m,t),this.dispatchCustomEvent("selectedDayChanged",{day:this.selectedDay,events:this.getEventsForDay(t)}),this.updateDays()}},{key:"days",get:function(){var t=this;return u(this,c).map((function(e){return{day:e,events:t.getEventsForDay(e)}}))},set:function(t){o(this,c,t),this.dispatchCustomEvent("daysChanged",this.days)}},{key:"customEventStore",get:function(){return u(this,g)},set:function(t){o(this,g,[])}},{key:"setup",value:function(){this.events=this.events.concat(u(this,d)),this.month=u(this,l).getMonth(),this.year=u(this,l).getFullYear(),this.days=this.getDaysInMonth(this.month,this.year)}},{key:"on",value:function(t,e){var n=this;u(this,g).push({customEventName:t,callback:e});var a=u(this,p).filter((function(e){return e.customEventName===t}));return a.length>0&&(a.forEach((function(t){n.dispatchCustomEvent(t.customEventName,t.data)})),o(this,p,u(this,p).filter((function(e){return e.customEventName!==t})))),this}},{key:"updateDays",value:function(){void 0!==this.month&&Number.isInteger(this.month)&&void 0!==this.year&&Number.isInteger(this.year)&&(this.days=this.getDaysInMonth(this.month,this.year))}},{key:"addEvent",value:function(t){if(!(t instanceof a))throw"Event must be an instance of CalendarEvent";if(!this.validateEventDoesntExistsAlready(t))throw"Duplicate Events Not Allowed";this.events=this.events.concat(t)}},{key:"dispatchCustomEvent",value:function(t,e){var n=this;u(this,g).length>0?u(this,g).forEach((function(a){a.customEventName===t&&a.callback(e,n)})):u(this,p).push({customEventName:t,data:e})}},{key:"getEventsForDay",value:function(t){var e=this,n=[];return this.events.forEach((function(a){e.checkDayHasEvent(t,a)&&n.push(a)})),n}},{key:"checkDayHasEvent",value:function(t,e){var n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every((function(t){return void 0!==t&&Number.isInteger(t)}))},a=!1===n(e.start.day)?1:e.start.day,i=!1===n(e.start.month)?n(e.start.year)?1:t.getMonth()+1:e.start.month,r=!1===n(e.start.year)?t.getFullYear():e.start.year,s=!1===n(e.start.weekDay)?null:e.start.weekDay,o=!1===n(e.end.day)?a:e.end.day,u=!1===n(e.end.month)?i:e.end.month,h=!1===n(e.end.year)?r:e.end.year,l=!1===n(e.end.weekDay)?s:e.end.weekDay,c=new Date(r,i-1,a),v=new Date(h,u-1,o);return null===s?!(!this.matchSameDate(t,c)||!this.matchSameDate(t,v))||t.getTime()>=c.getTime()&&t.getTime()<=v.getTime():null!==s&&t.getDay()===s&&null===l||null!==s&&null!==l&&t.getDay()>=s&&t.getDay()<=l||void 0}},{key:"validateEventDoesntExistsAlready",value:function(t){var e;return 0===(null!==(e=this.events)&&void 0!==e?e:[]).filter((function(e){return e.title===t.title&&e.start.getTime()===t.start.getTime()&&e.end.getTime()===t.end.getTime()})).length}},{key:"validateNoDuplicateEvents",value:function(t){var e=!1;return t.forEach((function(n){!0!==e&&t.filter((function(t){return JSON.stringify(t)===JSON.stringify(n)})).length>1&&(e=!0)})),!e}},{key:"getDaysInMonth",value:function(t,e){for(var n=new Date(e,t,1),a=[];n.getMonth()===t;)a.push(new Date(n)),n.setDate(n.getDate()+1);return a}},{key:"matchSameDate",value:function(t,e){return t&&e&&t.getFullYear()===e.getFullYear()&&t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()}}],n&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();return e})()));